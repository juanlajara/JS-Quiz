<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Dre's Javascript Quiz</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- Key FavIcon -->
		<link
			rel="icon"
			type="image/svg"
			href="./Assets/img/FaviconQuizTimer.jpg"
		/>
		<!-- Reset CSS-->
		<link rel="stylesheet" type="text/css" href="./Assets/css/reset.css" />
		<!-- BootStrap-->
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		/>
		<link rel="stylesheet" type="text/css" href="./Assets/css/style.css" />
		<!-- <script src="./Assets/script.js"></script> -->
	</head>
	<body class="container mt-5 text-center">
		<h1 id="heading">Javascript Coding Quiz</h1>
		<h2 id="desc">Description</h2>
		<h2 id="Question"></h2>
		<div id="Score"></div>
		<p id="listOfQ" class="justify-content-center"></p>
		<h6 id="pgeTimer"></h6>
		<button
			id="startBtn"
			type="button"
			class="btn btn-primary"
			onclick="StartQuiz()"
		>
			Start
		</button>

		<script>
			var timerVal = 5;
			var currentQ = 0;
			var currentpoints = 0;
			var topEl = document.body;
			var headingEl = topEl.querySelector("#heading");
			var descQEl = topEl.querySelector("#desc");
			var scoreEl = topEl.querySelector("#Score");
			var questionEl = topEl.querySelector("#Question");
			var pgeTimerEl = topEl.querySelector("#pgeTimer");
			var listOfQEl = topEl.querySelector("#listOfQ");
			var startBtnEl = topEl.querySelector("#startBtn");
			var myQuestions = [
				{
					question: "Question 1",
					answers: ["Q1An1", "Q1An2", "Q1An3"],
					correctAnswer: 0,
				},
				{
					question: "Question 2",
					answers: ["Q2An1", "Q2An2", "Q2An3"],
					correctAnswer: 1,
				},
			];

			function StartQuiz() {
				// Remove Buttons & Description
				startBtnEl.remove();
				descQEl.remove();
				//  a- Start the timer
				scoreEl.innerHTML = currentpoints + " Current Point(s)";
				//  b- Present the 1st question
				//       List of the options to question 1
				for (i = 0; i < myQuestions[currentQ].answers.length; i++) {
					questionEl.innerHTML = myQuestions[currentQ].question;
					var tempBtnEl = document.createElement("button");
					var tempBtnTxt = document.createTextNode(
						myQuestions[currentQ].answers[i]
					);
					tempBtnEl.appendChild(tempBtnTxt);
					// Add Attributes to Button
					tempBtnEl.setAttribute("value", i);
					tempBtnEl.setAttribute("class", "mr-2 btn btn-primary");
					listOfQEl.appendChild(tempBtnEl);

					// listOfQEl.children[i].addEventListener("click", console.log("next"));
					var allBtnEl = topEl
						.querySelectorAll("button")
						[i].addEventListener("click", nextQuestion);
					// tempBtnEl.onclick = console.log("Next Question"); // Append <li> to <ul> with id="myList"
				}

				// Start The Timer
				timer();

				//          1a-Onclick for the right answer - Next Question()
				//          1b-Onclick wrong answer - SubtractTime() & Next Question()
			}

			function nextQuestion() {
				if (
					parseInt(this.getAttribute("value")) ===
					myQuestions[currentQ].correctAnswer
				) {
					currentpoints++;
					scoreEl.innerHTML = currentpoints + " Current Point(s)";
				}

				currentQ++;

				if (myQuestions[currentQ] === undefined) {
					endQuiz();

					// topEl.querySelectorAll("button").forEach((element) => {
					// 	element.remove();
					// });
				} else {
					for (i = 0; i < myQuestions[currentQ].answers.length; i++) {
						questionEl.innerHTML = myQuestions[currentQ].question;
						var tempBtnEl = document.createElement("button");
						var tempBtnTxt = document.createTextNode(
							myQuestions[currentQ].answers[i]
						);
						tempBtnEl.appendChild(tempBtnTxt);
						tempBtnEl.setAttribute("value", i);
						tempBtnEl.setAttribute("class", "mr-2 btn btn-primary");
						var item = document.querySelectorAll("button")[i];
						item.replaceChild(tempBtnTxt, item.childNodes[0]);
						var allBtnEl = topEl
							.querySelectorAll("button")
							[i].addEventListener("click", nextQuestion);
					}
				}
			}

			function timer() {
				timerVal = timerVal;
				var timer = setInterval(function () {
					pgeTimerEl.innerHTML = timerVal + " Seconds Left";
					timerVal--;
					if (timerVal < 0) {
						clearInterval(timer);
						endQuiz();
					}
				}, 1000);
			}

			function endQuiz() {
				questionEl.remove();
				pgeTimerEl.remove();
				topEl.querySelectorAll("button").forEach((element) => {
					element.remove();
				});
			}
		</script>
	</body>
</html>
