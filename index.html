<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Dre's Javascript Quiz</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- Key FavIcon -->
		<link
			rel="icon"
			type="image/svg"
			href="./Assets/img/FaviconQuizTimer.jpg"
		/>
		<!-- Reset CSS-->
		<link rel="stylesheet" type="text/css" href="./Assets/css/reset.css" />
		<!-- BootStrap-->
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		/>
		<link rel="stylesheet" type="text/css" href="./Assets/css/style.css" />
		<!-- <script src="./Assets/script.js"></script> -->
	</head>
	<body class="container mt-5 text-center">
		<h1 id="heading">Javascript Coding Quiz</h1>
		<p id="desc">
			You will have 60 secs to complete this quiz. Each Incorrect answer will
			reduce the time by 10 secs
		</p>
		<button
			id="startBtn"
			type="button"
			class="btn btn-primary"
			onclick="StartQuiz()"
		>
			Start
		</button>
		<h3 id="Question" class="container"></h3>
		<div id="listOfAnwrs" class="col"></div>
		<aside>
			<h5 id="pgeTimer"></h5>
			<h6 id="Score"></h6>
		</aside>

		<script>
			// #region Variables
			var initimerVal = 60;
			var timeleft = 0;
			var currentpoints = 0;
			var wrongAnsPenalty = 10;
			var currentQ = 0;
			var myQuestions = [
				{
					question: "Inside which HTML element do we put the JavaScript?",
					answers: ["<script>", "<scripting>", "<javascript>"],
					correctAnswer: 0,
				},
				{
					question: "Where is the correct place to insert a JavaScript?",
					answers: [
						"The <head> section",
						"Both the <head> section and the <body> section are correct",
						"The <body> section",
					],
					correctAnswer: 1,
				},
				{
					question: "How do you create a function in JavaScript?",
					answers: [
						"function myFunction()",
						"function = myFunction()",
						"function:myFunction()",
					],
					correctAnswer: 0,
				},
			];
			// #endregion
			// #region Element Variables
			var topEl = document.body;
			var headingEl = topEl.querySelector("#heading");
			var descQEl = topEl.querySelector("#desc");
			var scoreEl = topEl.querySelector("#Score");
			var questionEl = topEl.querySelector("#Question");
			var pgeTimerEl = topEl.querySelector("#pgeTimer");
			var listOfAnwrsEl = topEl.querySelector("#listOfAnwrs");
			var startBtnEl = topEl.querySelector("#startBtn");
			// #endregion

			function StartQuiz() {
				// Remove Buttons & Description
				startBtnEl.remove();
				descQEl.remove();
				//  a- Start the timer
				scoreEl.innerHTML = " Current Point(s) : " + currentpoints;
				//  b- Present the 1st question
				//       List of the options to question 1
				for (i = 0; i < myQuestions[currentQ].answers.length; i++) {
					questionEl.innerHTML = myQuestions[currentQ].question;
					var tempBtnEl = document.createElement("button");
					var tempBtnTxt = document.createTextNode(
						myQuestions[currentQ].answers[i]
					);
					tempBtnEl.appendChild(tempBtnTxt);
					// Add Attributes to Button
					tempBtnEl.setAttribute("value", i);
					tempBtnEl.setAttribute(
						"class",
						"list-group-item list-group-item-info mb-2 container mt-2 text-center "
					);
					listOfAnwrsEl.appendChild(tempBtnEl);
					var allBtnEl = topEl
						.querySelectorAll("button")
						[i].addEventListener("click", nextQuestion);
				}

				// Start The Timer
				timer();
			}

			function nextQuestion() {
				if (
					parseInt(this.getAttribute("value")) ===
					myQuestions[currentQ].correctAnswer
				) {
					currentpoints++;
					scoreEl.innerHTML = " Current Point(s) : " + currentpoints;
				} else {
					timeleft -= wrongAnsPenalty;
				}

				currentQ++;

				if (myQuestions[currentQ] === undefined) {
					endQuiz();
				} else {
					topEl.querySelectorAll("button").forEach((element) => {
						element.remove();
					});
					for (i = 0; i < myQuestions[currentQ].answers.length; i++) {
						questionEl.innerHTML = myQuestions[currentQ].question;

						var tempBtnEl = document.createElement("button");
						var tempBtnTxt = document.createTextNode(
							myQuestions[currentQ].answers[i]
						);
						tempBtnEl.appendChild(tempBtnTxt);
						tempBtnEl.setAttribute("value", i);
						tempBtnEl.setAttribute(
							"class",
							"list-group-item list-group-item-info mb-2 container mt-2 text-center"
						);
						// var item = document.querySelectorAll("button")[i];

						listOfAnwrsEl.appendChild(tempBtnEl);
						var allBtnEl = topEl
							.querySelectorAll("button")
							[i].addEventListener("click", nextQuestion);
					}
				}
			}

			function timer() {
				timeleft = initimerVal;
				var timer = setInterval(function () {
					pgeTimerEl.innerHTML = timeleft + " Seconds Left";
					timeleft--;
					if (timeleft < 0) {
						clearInterval(timer);
						endQuiz();
					}
				}, 1000);
			}

			function endQuiz() {
				questionEl.remove();
				pgeTimerEl.remove();
				topEl.querySelectorAll("button").forEach((element) => {
					element.remove();
				});
				scoreEl.innerHTML = " Total Point(s) : " + currentpoints;
				scoreEl.setAttribute("style", "font-size:25px");
			}
		</script>
	</body>
</html>
